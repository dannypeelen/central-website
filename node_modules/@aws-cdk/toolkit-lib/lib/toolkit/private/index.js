"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.assemblyFromSource = assemblyFromSource;
const private_1 = require("../../api/cloud-assembly/private");
/**
 * Creates a Toolkit internal CloudAssembly from a CloudAssemblySource.
 * @param assemblySource the source for the cloud assembly
 * @param cache if the assembly should be cached, default: `true`
 * @returns the CloudAssembly object
 */
async function assemblyFromSource(ioHelper, assemblySource, cache = true) {
    if (assemblySource instanceof private_1.StackAssembly) {
        return assemblySource;
    }
    if (cache) {
        return new private_1.StackAssembly(await new private_1.CachedCloudAssemblySource(assemblySource).produce(), ioHelper);
    }
    return new private_1.StackAssembly(await assemblySource.produce(), ioHelper);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQW1CQSxnREFVQztBQTNCRCw4REFBNEY7QUFXNUY7Ozs7O0dBS0c7QUFDSSxLQUFLLFVBQVUsa0JBQWtCLENBQUMsUUFBa0IsRUFBRSxjQUFvQyxFQUFFLFFBQWlCLElBQUk7SUFDdEgsSUFBSSxjQUFjLFlBQVksdUJBQWEsRUFBRSxDQUFDO1FBQzVDLE9BQU8sY0FBYyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxJQUFJLEtBQUssRUFBRSxDQUFDO1FBQ1YsT0FBTyxJQUFJLHVCQUFhLENBQUMsTUFBTSxJQUFJLG1DQUF5QixDQUFDLGNBQWMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3BHLENBQUM7SUFFRCxPQUFPLElBQUksdUJBQWEsQ0FBQyxNQUFNLGNBQWMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUNyRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgdHlwZSB7IElDbG91ZEFzc2VtYmx5U291cmNlIH0gZnJvbSAnLi4vLi4vYXBpL2Nsb3VkLWFzc2VtYmx5JztcbmltcG9ydCB7IENhY2hlZENsb3VkQXNzZW1ibHlTb3VyY2UsIFN0YWNrQXNzZW1ibHkgfSBmcm9tICcuLi8uLi9hcGkvY2xvdWQtYXNzZW1ibHkvcHJpdmF0ZSc7XG5pbXBvcnQgdHlwZSB7IFNka1Byb3ZpZGVyLCBJb0hlbHBlciB9IGZyb20gJy4uLy4uL2FwaS9zaGFyZWQtcHJpdmF0ZSc7XG5cbi8qKlxuICogSGVscGVyIHN0cnVjdCB0byBwYXNzIGludGVybmFsIHNlcnZpY2VzIGFyb3VuZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sa2l0U2VydmljZXMge1xuICBzZGtQcm92aWRlcjogU2RrUHJvdmlkZXI7XG4gIGlvSGVscGVyOiBJb0hlbHBlcjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgVG9vbGtpdCBpbnRlcm5hbCBDbG91ZEFzc2VtYmx5IGZyb20gYSBDbG91ZEFzc2VtYmx5U291cmNlLlxuICogQHBhcmFtIGFzc2VtYmx5U291cmNlIHRoZSBzb3VyY2UgZm9yIHRoZSBjbG91ZCBhc3NlbWJseVxuICogQHBhcmFtIGNhY2hlIGlmIHRoZSBhc3NlbWJseSBzaG91bGQgYmUgY2FjaGVkLCBkZWZhdWx0OiBgdHJ1ZWBcbiAqIEByZXR1cm5zIHRoZSBDbG91ZEFzc2VtYmx5IG9iamVjdFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXNzZW1ibHlGcm9tU291cmNlKGlvSGVscGVyOiBJb0hlbHBlciwgYXNzZW1ibHlTb3VyY2U6IElDbG91ZEFzc2VtYmx5U291cmNlLCBjYWNoZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPFN0YWNrQXNzZW1ibHk+IHtcbiAgaWYgKGFzc2VtYmx5U291cmNlIGluc3RhbmNlb2YgU3RhY2tBc3NlbWJseSkge1xuICAgIHJldHVybiBhc3NlbWJseVNvdXJjZTtcbiAgfVxuXG4gIGlmIChjYWNoZSkge1xuICAgIHJldHVybiBuZXcgU3RhY2tBc3NlbWJseShhd2FpdCBuZXcgQ2FjaGVkQ2xvdWRBc3NlbWJseVNvdXJjZShhc3NlbWJseVNvdXJjZSkucHJvZHVjZSgpLCBpb0hlbHBlcik7XG4gIH1cblxuICByZXR1cm4gbmV3IFN0YWNrQXNzZW1ibHkoYXdhaXQgYXNzZW1ibHlTb3VyY2UucHJvZHVjZSgpLCBpb0hlbHBlcik7XG59XG4iXX0=