"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CachedCloudAssemblySource = void 0;
/**
 * A CloudAssemblySource that is caching its result once produced.
 *
 * Most Toolkit interactions should use a cached source.
 * Not caching is relevant when the source changes frequently
 * and it is to expensive to predict if the source has changed.
 */
class CachedCloudAssemblySource {
    source;
    cloudAssembly;
    constructor(source) {
        this.source = source;
    }
    async produce() {
        if (!this.cloudAssembly) {
            this.cloudAssembly = await this.source.produce();
        }
        return this.cloudAssembly;
    }
}
exports.CachedCloudAssemblySource = CachedCloudAssemblySource;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FjaGVkLXNvdXJjZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNhY2hlZC1zb3VyY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBR0E7Ozs7OztHQU1HO0FBQ0gsTUFBYSx5QkFBeUI7SUFDNUIsTUFBTSxDQUF1QjtJQUM3QixhQUFhLENBQTRCO0lBRWpELFlBQW1CLE1BQTRCO1FBQzdDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxLQUFLLENBQUMsT0FBTztRQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ25ELENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztDQUNGO0FBZEQsOERBY0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENsb3VkQXNzZW1ibHkgfSBmcm9tICdAYXdzLWNkay9jeC1hcGknO1xuaW1wb3J0IHR5cGUgeyBJQ2xvdWRBc3NlbWJseVNvdXJjZSB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBBIENsb3VkQXNzZW1ibHlTb3VyY2UgdGhhdCBpcyBjYWNoaW5nIGl0cyByZXN1bHQgb25jZSBwcm9kdWNlZC5cbiAqXG4gKiBNb3N0IFRvb2xraXQgaW50ZXJhY3Rpb25zIHNob3VsZCB1c2UgYSBjYWNoZWQgc291cmNlLlxuICogTm90IGNhY2hpbmcgaXMgcmVsZXZhbnQgd2hlbiB0aGUgc291cmNlIGNoYW5nZXMgZnJlcXVlbnRseVxuICogYW5kIGl0IGlzIHRvIGV4cGVuc2l2ZSB0byBwcmVkaWN0IGlmIHRoZSBzb3VyY2UgaGFzIGNoYW5nZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWNoZWRDbG91ZEFzc2VtYmx5U291cmNlIGltcGxlbWVudHMgSUNsb3VkQXNzZW1ibHlTb3VyY2Uge1xuICBwcml2YXRlIHNvdXJjZTogSUNsb3VkQXNzZW1ibHlTb3VyY2U7XG4gIHByaXZhdGUgY2xvdWRBc3NlbWJseTogQ2xvdWRBc3NlbWJseSB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgY29uc3RydWN0b3Ioc291cmNlOiBJQ2xvdWRBc3NlbWJseVNvdXJjZSkge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHByb2R1Y2UoKTogUHJvbWlzZTxDbG91ZEFzc2VtYmx5PiB7XG4gICAgaWYgKCF0aGlzLmNsb3VkQXNzZW1ibHkpIHtcbiAgICAgIHRoaXMuY2xvdWRBc3NlbWJseSA9IGF3YWl0IHRoaXMuc291cmNlLnByb2R1Y2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2xvdWRBc3NlbWJseTtcbiAgfVxufVxuIl19